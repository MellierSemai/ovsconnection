# readme
Рекомендую використовувати віртуальну машину, оскільки є можливість конфлікту файлів. Є два варіанти встановлення:

1) запустити ./runall.sh, завдяки якому все встановиться без жодних запитань
Встановлення:
  1) Створити віртуальну машину та підключити її до мережі
  2) apt-get isntall git
  3) git clone https://github.com/MellierSemai/ovsconnection.git
  4) Зайти в завантажену папку та написати команду: chmod +x * 
  5) ./runall.sh
  6) Далі, шоб перевірити зв'язок між vrf1/vrf2 в docker1 і docker2 потрібно виконати такі дії:
    - sudo docker exec -it dc1 bash або sudo docker exec -it dc2 bash
    - ip netns exec vrf1 ping 10.10.10.2 10.10.10.4 10.10.10.5 / ip netns exec vrf2 ping 10.10.10.1 10.10.10.4 10.10.10.5 (docker1)
    - ip netns exec vrf1 ping 10.10.10.1 10.10.10.2 10.10.10.5 / ip netns exec vrf2 ping 10.10.10.1 10.10.10.2 10.10.10.4 (docker2)

2) встановлювати все поступово але існування цього варіанту немає жодного сенсу бо є перший варінт (проте шкода його видалити)
Встановлення:
  1) Створити віртуальну машину та підключити її до мережі
  2) Завантажити архів та розпакувати його, потім змінити дозвіл файлу за допомогою команди: chmod +x name.sh
  3) Використати команду для запуску першого скрипта: sudo ./main.sh
  4) Далі треба створити два Docker контейнери, які є DC, в кожному з який по два namespace (vrf1, vrf2):
    4.1) sudo ./docker.sh
    4.2) sudo ./docker2.sh
  5) Тепер єдине що залишилось це створити головний комутатор через який буде ходити трафік, використовуємо останній скрипт: ./bridge.sh
  6) Далі, шоб перевірити зв'язок між vrf1/vrf2 в docker1 і docker2 потрібно виконати такі дії:
    - sudo docker exec -it dc1 bash або sudo docker exec -it dc2 bash
    - ip netns exec vrf1 ping 10.10.10.2 10.10.10.4 10.10.10.5 / ip netns exec vrf2 ping 10.10.10.1 10.10.10.4 10.10.10.5 (docker1)
    - ip netns exec vrf1 ping 10.10.10.1 10.10.10.2 10.10.10.5 / ip netns exec vrf2 ping 10.10.10.1 10.10.10.2 10.10.10.4 (docker2)

Якщо ping працює то все круто !

В результаті ми отримали таку топологію:

               +------------+
               |   Docker   |
               |  Container |
               | 1          |
               |            |
               |   +----+   |
        _______|   |NS1 |   | 10.10.10.1/24
       |       |   +----+   |                
       | ovs   |            |
       |       |   +----+   |
       |_______|   |NS2 |   | 10.10.10.2/24
         |      |   +----+   |
     ____|      +------------+  
    |               |eth1 (173.14.88.2/24)
    |               |
    |   +-----------------------------+
gre |   |             OVS BRIDGE      |
    |   +-----------------------------+
    |                |
    |____            |eth1 (173.14.88.3/24)
         |      +------------+
         |     |   Docker   |
         |     |  Container |
         |     | 2          |
         |     |            |
        _|_____|   +----+   |
       |       |   |NS1 |   | 10.10.10.3/24
       | ovs   |   +----+   |                
       |       |            |
       |_______|   +----+   |
               |   |NS2 |   | 10.10.10.4/24
               |   +----+   |
               +------------+

